{%extends 'base.html'%}

{%block content%}
    <div class="container mt-2">
        <div class="input-group mb-3">
            <input type="text" id="buyResources" class="form-control" placeholder="Enter the resources to be purchased separated by ','" aria-label="Enter the resources to be purchased separated by ','" aria-describedby="button-addon2">
            <button class="btn btn-outline-success UpdateCapList" type="button">Buy</button>
        </div>
    </div>
    <div class="container mt-2">
        <div class="input-group mb-3">
            <input type="text" id="getKeysInput" class="form-control" placeholder="Enter the resources to be derived separated by ','" aria-label="Enter the resources to be derived separated by ','" aria-describedby="button-addon2">
            <button class="btn btn-outline-success GetKeys" type="button"  data-bs-toggle="modal" data-bs-target="#modal-keys">Get Keys</button>
        </div>
    </div>


    <div class="container mt-3">
        <button class="btn btn-outline-success me-2 UpdateCapListTesting" type="button">Update CapList | for testing</button>
        <button class="btn btn-outline-success me-2 PrintData" type="button">Print Results</button>
    </div>
    <div class="container mt-2">
        <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th scope="col">Etichetta</th>
                <th scope="col">Valori</th>
              </tr>
            </thead>
            <tbody>
                <ul class="list-group">
                    {% if 'error' not in data %}
                        {% for el in data%}
                            <tr>
                                <td>{{el}}</td>
                                <td>{{data[el]}}</td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td></td>
                            <td></td>
                        </tr>
                    {% endif%}
                </ul>
            </tbody>
          </table>
    </div>



    <div class="modal fade" tabindex="-1" role="dialog" id="modal-cap">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modal-cap-Title"></h5>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <div id="modal-cap-Data"></div>
            </div>
          </div>
        </div>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" id="modal-keys">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modal-keys-Title"></h5>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <table class="table text-break" id="modal-keys-Data">
                    <thead>
                      <tr>
                        <th scope="col">ID</th>
                        <th scope="col">KEY</th>
                      </tr>
                    </thead>
                    <tbody>
                    </tbody>
                  </table>
            </div>
          </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="{{ url_for('static',filename='js/logic.js')}}"></script>
    <script src="{{ url_for('static',filename='node_modules/js-sha3/src/sha3.js')}}"></script>
    
    <script src="https://cdn.jsdelivr.net/gh/ethereumjs/browser-builds/dist/ethereumjs-tx/ethereumjs-tx-1.3.3.min.js"></script>

    <script>
         var mapping = JSON.parse('{{map["address"]|safe}}');

    </script>
    
{%endblock%}
